<!DOCTYPE html>
<html>
    <head>
        <title>Spinning Wheel</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenMax.min.js"></script>
        <script src="Winwheel.js"></script>
        <link href="style.css" rel="stylesheet" />
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                        <button class="btn btn-primary" onClick="theWheel.startAnimation();">Spin the Wheel</button>
                        <button class="btn btn-warning" onClick="theWheel.rotationAngle=(theWheel.rotationAngle % 360); theWheel.draw();">Reset</button>
                </div>
            <!-- </div>
            <div class="row"> -->
                    <div class="col-lg-6">
                            <button onClick="changeColors();">Change Colors</button>
                            <button onClick="addSegment();">Add Segment</button>
                            <button onClick="deleteSegment();">Delete Segment</button>
                    </div>
            </div>
            <div class="row">
                    <div id="canvasContainer" class="col-lg-6">
                            <br><br>
                            <canvas id="canvas" width="500" height="500">
                                    Canvas not supported, use another browser.
                            </canvas>
                            <img id="prizePointer" src="./images/basic_pointer.png" alt="V" />
                        </div>
                    <div class="col-lg-6">
                        <div class="row">
                            <div class="col-lg-3">
                                <h3>Player 1</h3>
                            </div>
                            <div class="col-lg-3">
                                <h3>Player 2</h3>
                            </div>
                            <div class="col-lg-3">
                                <h3>Player 3</h3>
                            </div>
                            <div class="col-lg-3">
                                <h3>Player 4</h3>
                            </div>
                        </div>
                       <div class="row">

                            
                        </div>
                    </div>
            </div>
        </div>
        
<script>
    let theWheel = new Winwheel({
        'canvasId'    : 'canvas',
        'lineWidth'   : 3,
        'numSegments' : 18,
        'direction'    : 'clockwise',
        'repeat'       : 0,
        'textAlignment'  : 'center',
        'textOrientation' : 'vertical',    // Set orientation. horizontal, vertical, curved.
        'textFontFamily'  : 'verdana',     // Monospace font best for vertical and curved.
        'textFontSize'    : 24,
        'outerRadius'  : 220, 
        'centerX'     : 250,    
        'centerY'     : 255,
        'rotationAngle'   : 0, 
        'innerRadius'   : 75,  
        'animation' :
        {
            'type'     : 'spinToStop',
            'duration' : 3,
            'spins'    : 9,
            'callbackFinished' : 'alertPrize()'
        },
        'segments'    :
        [
            {'fillStyle' : '#000000', 'textFontSize' : 14, 'textFillStyle' : '#ffffff', 'text' : '  BANKRUPT'},
            {'fillStyle' : '#7649fe', 'text' : '500'},
            {'fillStyle' : '#0c164f', 'textFillStyle' : '#ffffff', 'text' : '800'}, 
            {'fillStyle' : '#5643fd', 'text' : '600'},
            {'fillStyle' : '#ba1e68', 'text' : '300'},
            {'fillStyle' : '#1d1135', 'textFillStyle' : '#ffffff', 'text' : '400'},
            {'fillStyle' : '#ffffff', 'textFontSize' : 14, 'text' : ' LOSE TURN'},
            {'fillStyle' : '#7649fe', 'text' : '900'},
            {'fillStyle' : '#0c164f', 'textFillStyle' : '#ffffff', 'text' : '700'}, 
            {'fillStyle' : '#5643fd', 'text' : '600'},
            {'fillStyle' : '#ba1e68', 'text' : '800'},
            {'fillStyle' : '#1d1135', 'textFillStyle' : '#ffffff', 'text' : '500'},
            {'fillStyle' : '#000000', 'textFontSize' : 14, 'textFillStyle' : '#ffffff', 'text' : '  BANKRUPT'},
            {'fillStyle' : '#7649fe', 'text' : '1000'}, 
            {'fillStyle' : '#0c164f', 'textFillStyle' : '#ffffff', 'text' : '400'},
            {'fillStyle' : '#5643fd', 'text' : '700'},
            {'fillStyle' : '#ba1e68', 'text' : '900'},
            {'fillStyle' : '#1d1135', 'textFillStyle' : '#ffffff', 'text' : '2500'}
        ],
        'pointerGuide' :  
        {
            'display'     : false,
            'strokeStyle' : '#ff3300',
            'lineWidth'   : 3
        },
        'pins' : 
        {
            'number'      : 36,
            'outerRadius' : 3,
            'margin'      : 5,
            'fillStyle'   : 'black',
            'strokeStyle' : 'white'
        }
    });

    function changeColors() {
        // (note first array position is 1 not 0). Quirk of winwheel.js
        let temp = theWheel.segments[1].fillStyle;
        theWheel.segments[1].fillStyle = theWheel.segments[2].fillStyle;
        theWheel.segments[2].fillStyle = theWheel.segments[3].fillStyle;
        theWheel.segments[3].fillStyle = theWheel.segments[4].fillStyle;
        theWheel.segments[4].fillStyle = theWheel.segments[5].fillStyle;
        theWheel.segments[5].fillStyle = theWheel.segments[6].fillStyle;
        theWheel.segments[6].fillStyle = theWheel.segments[7].fillStyle;
        theWheel.segments[7].fillStyle = theWheel.segments[8].fillStyle;
        theWheel.segments[8].fillStyle = theWheel.segments[9].fillStyle;
        theWheel.segments[9].fillStyle = theWheel.segments[10].fillStyle;
        theWheel.segments[10].fillStyle = theWheel.segments[11].fillStyle;
        theWheel.segments[11].fillStyle = theWheel.segments[12].fillStyle;
        theWheel.segments[12].fillStyle = theWheel.segments[13].fillStyle;
        theWheel.segments[13].fillStyle = theWheel.segments[14].fillStyle;
        theWheel.segments[14].fillStyle = theWheel.segments[15].fillStyle;
        theWheel.segments[15].fillStyle = theWheel.segments[16].fillStyle;
        theWheel.segments[16].fillStyle = theWheel.segments[17].fillStyle;
        theWheel.segments[17].fillStyle = theWheel.segments[18].fillStyle;
        theWheel.segments[18].fillStyle = temp;
        theWheel.draw();
    };

    function addSegment(){
        // Use a date object to set the text of each added segment 
        // to the current minutes:seconds just to give each new segment a different label).
        let date = new Date();
        // The Second parameter in the call to addSegment specifies the position,
        // in this case 1 meaning the new segment goes at the start of the wheel.
        theWheel.addSegment({
            'text' : date.getMinutes() + ':' + date.getSeconds(),
            'fillStyle' : '#0000FF'
        }, 1);
        theWheel.draw();
    };
 
    function deleteSegment() {
        // Call function to remove a segment from the wheel, by default the last one will be
        // removed; you can pass in the number of the segment to delete if desired.
        theWheel.deleteSegment();
        theWheel.draw();
    };

    function alertPrize() {
        let winningSegment = theWheel.getIndicatedSegment();
        alert("The segment is: " + winningSegment.text);
    }
</script>
</body>
</html>